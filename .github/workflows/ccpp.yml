name: CI of aricpp

on: [push,pull_request]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: setup dependencies
      run: |
        sudo apt-get -y update
        sudo apt-get -y install -y ninja-build libboost-all-dev
    - name: make
      run: |
        cd examples
        make clean
        make
    - name: cmake
      run: |
        rm -rf build
        mkdir build && cd build
        cmake .. -DARICPP_BuildExamples=ON -DCMAKE_CXX_FLAGS="-pedantic -Wall -Wextra -Wcast-align -Wcast-qual -Wctor-dtor-privacy -Wdisabled-optimization -Wformat=2 -Winit-self -Wmissing-declarations -Wmissing-include-dirs -Wold-style-cast -Woverloaded-virtual -Wredundant-decls -Wshadow -Wsign-conversion -Wsign-promo -Wstrict-overflow=5 -Wundef -Werror"
        make
